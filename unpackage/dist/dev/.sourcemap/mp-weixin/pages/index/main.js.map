{"version":3,"sources":["uni-app:///main.js",null,"webpack:///F:/uniappWeather/pages/index/main.vue?7647","webpack:///F:/uniappWeather/pages/index/main.vue?5d25","webpack:///F:/uniappWeather/pages/index/main.vue?0c3b","uni-app:///pages/index/main.vue","webpack:///F:/uniappWeather/pages/index/main.vue?5b7a","webpack:///F:/uniappWeather/pages/index/main.vue?27da"],"names":["createPage","Page"],"mappings":"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","file":"pages/index/main.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/index/main.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./main.vue?vue&type=template&id=3120bf0f&scoped=true&\"\nvar renderjs\nimport script from \"./main.vue?vue&type=script&lang=js&\"\nexport * from \"./main.vue?vue&type=script&lang=js&\"\nimport style0 from \"./main.vue?vue&type=style&index=0&id=3120bf0f&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3120bf0f\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/index/main.vue\"\nexport default component.exports","export * from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=template&id=3120bf0f&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.cityhistory, function(item, index) {\n    var $orig = _vm.__get_orig(item)\n\n    var g0 = item.data.city.split(\",\")\n    var g1 = item.data.city.split(\",\")\n    return {\n      $orig: $orig,\n      g0: g0,\n      g1: g1\n    }\n  })\n\n  var g2 = _vm.weathermsg ? Object.values(_vm.dateweather) : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n        g2: g2\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=script&lang=js&\"","<template>\r\n\t<div class=\"index\">\r\n\t\t<div class=\"indexbox\">\r\n\t\t\t<div class=\"localtion\">\r\n\t\t\t\t<div \r\n\t\t\t\tv-if='!!region'\r\n\t\t\t\t@click='opendrawer' \r\n\t\t\t\tstyle='height:100%;display: flex;justify-content: center;align-items: center;'>\r\n\t\t\t\t\t<icon type=\"search\" size=\"18\" color='#666' style=\"height:20px;\"></icon>\r\n\t\t\t\t\t{{region}}\r\n\t\t\t\t</div>\r\n\t\t\t\t<uni-drawer ref=\"unidrawer\">\r\n\t\t\t\t\t<div style='height:40px;background:#333;'>\r\n\t\t\t\t\t\t<div  style='height: 40px;width: calc(100% - 40px);float: left;text-align: left;color:#fff;font-size:15px;text-indent:10px;'>搜索城市</div>\r\n\t\t\t\t\t\t<icon type=\"search\" size=\"20\" color='#fff' style=\"float: right;width: 40px;height:30px;padding-top: 10px;\" @click=\"tocitys\"></icon>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<scroll-view style='height:calc(100% - 40px)' scroll-y> \r\n\t\t\t\t\t\t\t<uni-swipe-action>\r\n\t\t\t\t\t\t\t\t<uni-swipe-action-item \r\n\t\t\t\t\t\t\t\t:right-options=\"options\" \r\n\t\t\t\t\t\t\t\tv-for=\"(item,index) in cityhistory\" \r\n\t\t\t\t\t\t\t\t:key='index'\r\n\t\t\t\t\t\t\t\t@click='bindClick($event,item)'\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<view style=\"display: flex;width: 100%;height: 50px;line-height: 50px;border-bottom: 1px solid #ccc;\" @click.stop=\"closedrawer(item.data.city,item._id)\">\r\n\t\t\t\t\t\t\t\t\t\t<div style='flex:70%;text-align:left;text-indent:10px;font-size:15px;'>{{item.data.city.split(',')[item.data.city.split(',').length-1]}}</div>\r\n\t\t\t\t\t\t\t\t\t\t<div style='flex:30%;text-align:left;font-size:15px;'>\r\n\t\t\t\t\t\t\t\t\t\t\t{{item.data.temp}}℃\r\n\t\t\t\t\t\t\t\t\t\t\t<image :src=\"'/static/weathercn/'+item.data.img+'.png'\" mode=\"\" style=\"width: 25px;height: 25px;margin-top: 10px; float: right;\"></image>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</uni-swipe-action-item>\r\n\t\t\t\t\t\t\t</uni-swipe-action>\r\n\t\t\t\t\t</scroll-view>\r\n\t\t\t\t</uni-drawer>\r\n\t\t\t</div>\r\n\t\t\t<div class='showrequest' v-if='weathermsg'>\r\n\t\t\t\t<div class='data_weather'  v-if=\"!!Object.values(dateweather).length\" @click=\"totodydetail\">\r\n\t\t\t\t\t<div class='left'>\r\n\t\t\t\t\t\t<image style='width:60px;height:60px;' :src=\"`/static/weathercn/${dateweather.img}.png`\"/>\r\n\t\t\t\t\t\t<div>{{dateweather.wind_direction}} {{dateweather.wind_level}} 湿度:{{dateweather.humidity}}%</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"right\">\r\n\t\t\t\t\t\t<div >{{dateweather.current_condition}}</div>\r\n\t\t\t\t\t\t<div :style=\"'background:'+dateweather.background\">{{dateweather.quality_level}}    {{dateweather.aqi}}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<!-- 一周天气 -->\r\n\t\t\t\t<div class='weakWeather' v-if=\"forecastlist.length\">\r\n\t\t\t\t\t<h2>一周天气预报</h2>\r\n\t\t\t\t\t<swiper display-multiple-items=\"3\" duration=\"500\">\r\n\t\t\t\t\t  <block v-for=\"(item,index) in forecastlist\" :key=\"index\">\r\n\t\t\t\t\t\t<swiper-item @click=\"gotodetail(index)\">\r\n\t\t\t\t\t\t\t<div>{{item.week}}</div>\r\n\t\t\t\t\t\t\t<div>{{item.date}}</div>\r\n\t\t\t\t\t\t\t<div style='font-size:13px;'>{{item.day.weather==item.night.weather? item.day.weather:item.day.weather+'转'+item.night.weather}}</div>\r\n\t\t\t\t\t\t\t<div>{{item.night.templow}}</div>\r\n\t\t\t\t\t\t\t<div>{{item.day.temphigh}}</div>\r\n\t\t\t\t\t\t\t<div>{{item.day.winddirect=='持续无风向'? '微风':item.day.winddirect}}</div>\r\n\t\t\t\t\t\t\t<div>{{item.day.windpower==item.night.windpower? item.day.windpower:item.day.windpower+'转'+item.night.windpower}}</div>\r\n\t\t\t\t\t\t</swiper-item>\r\n\t\t\t\t\t  </block>\r\n\t\t\t\t\t</swiper>\r\n\t\t\t\t</div>\r\n\t\t\t\t<!-- 24小时天气 -->\r\n\t\t\t\t<div class=\"hour\" v-if=\"hourlist.length\">\r\n\t\t\t\t\t<h2>24小时天气预报</h2>\r\n\t\t\t\t\t<swiper display-multiple-items=\"6\" interval=\"500\" duration=\"500\">\r\n\t\t\t\t\t  <block v-for=\"(item,index) in hourlist\" :key=\"index\">\r\n\t\t\t\t\t\t<swiper-item>\r\n\t\t\t\t\t\t\t<div>{{item.condition}}</div>\r\n\t\t\t\t\t\t\t<div>{{item.temperature}}</div>\r\n\t\t\t\t\t\t\t<div>{{item.hour}}</div>\r\n\t\t\t\t\t\t</swiper-item>\r\n\t\t\t\t\t  </block>\r\n\t\t\t\t\t</swiper>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"noweathermsg\" style='height: calc(100% - 40px);text-align: center;line-height: 100px;font-size: 18px;' v-else>\r\n\t\t\t\t当前城市天气查询失败\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport {request} from 'utils';\r\nimport {mapState,mapMutations} from 'vuex';\r\nimport {uniDrawer,uniSwipeAction,uniSwipeActionItem} from \"@dcloudio/uni-ui\";\r\n//初始化数据库\r\nwx.cloud.init();\r\nconst db = wx.cloud.database({});\r\nconst citylist = db.collection('citylist');\r\n\r\nlet result,lifeindex = null;\r\n\r\nexport default {\r\n\tdata () {\r\n\t\treturn {\r\n\t\t\tlistdata:null,\r\n\t\t\tregion:null,\r\n\t\t\t// 今天天气信息\r\n\t\t\tdateweather:{},\r\n\t\t\t// 15天天气\r\n\t\t\tforecastlist:[],\r\n\t\t\t// 24小时天气\r\n\t\t\thourlist:[],\r\n\t\t\toptions: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: '取消',\r\n\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\tbackgroundColor: '#007aff'\r\n\t\t\t\t\t}\r\n\t\t\t\t}, \r\n\t\t\t\t{\r\n\t\t\t\t\ttext: '删除',\r\n\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\tbackgroundColor: '#dd524d'\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t\tcityhistory:null,\r\n\t\t\tweathermsg:true\r\n\t\t}\r\n\t},\r\n\tcomponents:{\r\n\t  uniDrawer,uniSwipeAction,uniSwipeActionItem\r\n\t},\r\n\tcomputed:{\r\n\t  ...mapState({\r\n\t\t  choosecity:state=>state.index.choosecity\r\n\t  })\r\n\t},\r\n\tonLoad(){\r\n\t\twx.showLoading({\r\n\t\t  title: '加载中',\r\n\t\t})\r\n\t},\r\n\tonShow() {\r\n\t\tif(!!this.choosecity){\r\n\t\t\tthis.region = this.choosecity.province;\r\n\t\t\tthis.getweather(this.choosecity.province)\r\n\t\t}else{\r\n\t\t\tthis.GetLocation();\r\n\t\t}\r\n\t\twx.showShareMenu({\r\n\t\t\twithShareTicket:true,\r\n\t\t\tmenus:['shareAppMessage','shareTimeline']\r\n\t\t})\r\n\t},\r\n\tonPullDownRefresh () {\r\n\t\tthis.GetLocation();\r\n\t},\r\n\tonHide(){\r\n\t\t//切换到别的tab页面时候，地址要默认显示设备所在地址\r\n\t\tthis.clearChooseCity();\r\n\t},\r\n\tmethods: {\r\n\t\t...mapMutations(['SETCHOOSECITY']),\r\n\t\tclearChooseCity(){\r\n\t\t\tthis.SETCHOOSECITY('')\r\n\t\t},\r\n\t\t//初始化时加载查询过的历史数据\r\n\t\tgetlinelist(){\r\n\t\t\tlinelist.get({\r\n\t\t\t\tsuccess:res=>{\r\n\t\t\t\t\tthis.checkpoint = res.data;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},  \r\n\t\tGetLocation(){\r\n\t\t\twx.getSetting({\r\n\t\t\t\tsuccess:res=>{\t\t\t\r\n\t\t\t\t\tif (!JSON.stringify(res.authSetting).includes('scope.userLocation')) {  //3.1 每次进入程序判断当前是否获得授权，如果没有就去获得授权，如果获得授权，就直接获取当前地理位置\r\n\t\t\t\t\t\tthis.getAuthorizeInfo()\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.getLocationInfo()\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetAuthorizeInfo(){  //1. uniapp弹窗弹出获取授权（地理，个人微信信息等授权信息）弹窗\r\n\t\t\twx.authorize({\r\n\t\t\t\tscope: \"scope.userLocation\",\r\n\t\t\t\tsuccess:res=>{ //1.1 允许授权\r\n\t\t\t\t\tthis.getLocationInfo();\r\n\t\t\t\t},\r\n\t\t\t\tfail(){    //1.2 拒绝授权\r\n\t\t\t\t\tconsole.log(\"你拒绝了授权，无法获得周边信息\")\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\tgetLocationInfo(){  //2. 获取地理位置\r\n\t\t\twx.getLocation({\r\n\t\t\t\ttype: 'wgs84',\r\n\t\t\t\tsuccess:data=> {\r\n\t\t\t\t\tthis.qqmapsdk.reverseGeocoder({\r\n\t\t\t\t\t  location: {\r\n\t\t\t\t\t\tlatitude: data.latitude,\r\n\t\t\t\t\t\tlongitude: data.longitude\r\n\t\t\t\t\t  },\r\n\t\t\t\t\t  success: (res) =>{\r\n\t\t\t\t\t\t   if(res.result.address_component.province==res.result.address_component.city)\r\n\t\t\t\t\t\t\t\tthis.region = res.result.address_component.province+','+res.result.address_component.district;\r\n\t\t\t\t\t\t   else\r\n\t\t\t\t\t\t\t\tthis.region = res.result.address_component.province+','+res.result.address_component.city+','+res.result.address_component.district;\r\n\t\t\t\t\t\tthis.getweather(this.region);\r\n\t\t\t\t\t  },\r\n\t\t\t\t\t  fail:  (err) => {\r\n\t\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t\t  }\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetweather(position,id){\r\n\t\t\trequest('https://jisutqybmf.market.alicloudapi.com/weather/query?city='+position.split(',')[position.split(',').length-1],{'Authorization':'APPCODE def0b8f2c0304cb59b0a7cdaa24dd000' })\r\n\t\t\t.then(res=>{\r\n\t\t\t\tif(res.statusCode!=200){\r\n\t\t\t\t\tthis.weathermsg = false;\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tthis.weathermsg = true;\r\n\t\t\t\twx.hideLoading();\r\n\t\t\t\tresult =  res.data.result;\r\n\t\t\t\tlifeindex = result.index;\r\n\t\t\t\tthis.dateweather={\r\n\t\t\t\t  current_temperature: result.temp,\r\n\t\t\t\t  current_condition: result.weather,\r\n\t\t\t\t  wind_direction: result.winddirect,\r\n\t\t\t\t  wind_level: result.windpower,\r\n\t\t\t\t  quality_level: result.aqi.quality,\r\n\t\t\t\t  aqi: result.aqi.aqi,\r\n\t\t\t\t  background:result.aqi.aqiinfo.color,\r\n\t\t\t\t  humidity:result.humidity,\r\n\t\t\t\t  img:result.img\r\n\t\t\t\t},\r\n\t\t\t\tthis.forecastlist = result.daily;\r\n\t\t\t\tthis.hourlist = result.hourly.map(o=>Object.assign({},{'condition': o.weather,'hour':o.time,'temperature':o.temp}))\r\n\t\t\t\twx.stopPullDownRefresh();\r\n\t\t\t\t//储存城市天气历史记录\r\n\t\t\t\tthis.listdata = {city:position,temp:result.temp,img:result.img};\r\n\t\t\t\tcitylist.get({\r\n\t\t\t\t\tsuccess:res=>{\r\n\t\t\t\t\t\t// 没有历史结果就保存,有历史结果就更新\r\n\t\t\t\t\t\tif(!res.data.map(o=>o.data).some(o=>o.city==this.listdata.city)){\r\n\t\t\t\t\t\t\tcitylist.add({\r\n\t\t\t\t\t\t\t\tdata:{\r\n\t\t\t\t\t\t\t\t\tdata:this.listdata\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\t\t\tconsole.log(res._id)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(!!id && !(!res.data.map(o=>o.data).some(o=>o.city==this.listdata.city))){\r\n\t\t\t\t\t\t\tcitylist.doc(id).update({\r\n\t\t\t\t\t\t\t\tdata:{\r\n\t\t\t\t\t\t\t\t\tdata:this.listdata\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tsuccess:res=>{\r\n\t\t\t\t\t\t\t\t\tconsole.log(res_id)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t},\r\n\t\t//去到详情页\r\n\t\tgotodetail(index){\r\n\t\t\twx.navigateTo({\r\n\t\t\t\turl:`../../pages/index/components/weatherdetail/main?data=${JSON.stringify(this.forecastlist)}&lifeindex=${JSON.stringify(lifeindex)}&index=${index}`\r\n\t\t\t})\r\n\t\t},\r\n\t\ttotodydetail(){\r\n\t\t\tlet data = {\r\n\t\t\t\tweather:result.weather,\r\n\t\t\t\twinddirect:result.winddirect,\r\n\t\t\t\twindpower:result.windpower,\r\n\t\t\t\ttemp:result.temp,\r\n\t\t\t\tpressure:result.pressure,\r\n\t\t\t\thumidity:result.humidity,\r\n\t\t\t\tquality:result.aqi.quality,\r\n\t\t\t\tipm2_5:result.aqi.ipm2_5,\r\n\t\t\t\taqi:result.index[0].detail,\r\n\t\t\t\timg:result.img\r\n\t\t\t}\r\n\t\t\twx.navigateTo({\r\n\t\t\t\turl:`../../pages/index/components/todydetail/main?data=${JSON.stringify(data)}`\r\n\t\t\t})\r\n\t\t},\r\n\t\ttocitys(){\r\n\t\t\twx.navigateTo({\r\n\t\t\t\turl:'../../pages/index/components/selectcitys/main'\r\n\t\t\t})\r\n\t\t\tsetTimeout(()=>{\r\n\t\t\t\tthis.$refs.unidrawer.close();\r\n\t\t\t},1000)\r\n\t\t},\r\n\t\tbindClick({content},{_id}){\r\n\t\t\tif(content.text != '删除') return;\r\n\t\t\tcitylist.doc(_id).remove({\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tcitylist.get({\r\n\t\t\t\t\t\tsuccess:res=>{\r\n\t\t\t\t\t\t\tthis.cityhistory = res.data;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\tclosedrawer(data,id){\r\n\t\t\tthis.getweather(data,id);\r\n\t\t\tthis.region = data;\r\n\t\t\tthis.$refs.unidrawer.close();\r\n\t\t},\r\n\t\topendrawer(){\r\n\t\t\tthis.$refs.unidrawer.open();\r\n\t\t\tcitylist.get({\r\n\t\t\t\tsuccess:res=>{\r\n\t\t\t\t\tthis.cityhistory = res.data;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n<style scoped>\r\n\t@import 'index.css';\r\n</style>","import mod from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=style&index=0&id=3120bf0f&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=style&index=0&id=3120bf0f&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1612164247701\n      var cssReload = require(\"F:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}